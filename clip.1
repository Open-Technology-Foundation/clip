.TH CLIP 1 "November 2025" "clip 1.0.1" "User Commands"
.SH NAME
clip \- terminal clipboard utility for Linux systems
.SH SYNOPSIS
.B clip
[\fIOPTIONS\fR] \fIFILE\fR...
.br
.B clip
.B \-p
[\fIOPTIONS\fR] [\fIFILE\fR]
.br
.B clip
.B \-h
|
.B \-V
.SH DESCRIPTION
.B clip
is a professional-grade command-line clipboard utility that enables seamless data transfer between terminal and GUI applications on Linux systems. It supports both text and PNG image operations with built-in compression capabilities.

The utility operates in two modes:
.TP
.B Copy mode (default)
Copies contents of one or more files to the system clipboard. Multiple files are concatenated in order.
.TP
.B Paste mode
Pastes clipboard contents to a file or stdout. Automatically detects and handles PNG image data with optional compression.

.B clip
is fully BCS-compliant (Bash Coding Standard), ShellCheck clean, and has zero security vulnerabilities. It features comprehensive input validation and professional error handling.

.SH OPTIONS
.SS General Options
.TP
.BR \-p ", " \-\-paste
Enable paste mode. Without this option, clip operates in copy mode (copying files to clipboard).
If no filename is specified in paste mode, output goes to stdout.
.TP
.BR \-v ", " \-\-verbose
Enable verbose output (default). Shows informational messages during operation.
.TP
.BR \-q ", " \-\-quiet
Disable verbose output. Only errors are displayed. Useful for scripts.
.TP
.BR \-V ", " \-\-version
Display version information and exit.
.TP
.BR \-h ", " \-\-help
Display help message and exit.

.SS Image Compression Options
These options apply only to PNG images in paste mode.
.TP
.BR \-c ", " \-\-compress
Enable PNG optimization using lossless/lossy compression.
Tool priority: pngquant (best) → optipng → imagemagick (fallback).
Only uses compressed version if actually smaller than original.
.TP
.BR \-r ", " \-\-resize
Use dimension-based compression instead of optimization.
Resizes image by percentage specified with \fB\-Q\fR.
Requires imagemagick.
.TP
.BR \-Q ", " \-\-quality " \fIN\fR"
Set compression quality/level (1-100, default: 90).
.RS
.IP \(bu 2
With \fB\-c\fR: maximum quality for pngquant (lower = more compression) or optimization level for optipng
.IP \(bu 2
With \fB\-r\fR: resize percentage (e.g., 75 = 75% of original dimensions)
.RE

.SS File Header/Footer Options
These options apply only to copy mode.
.TP
.BR \-f ", " \-\-use-file-header
Add headers and footers to each copied file using the templates specified by \fB\-H\fR and \fB\-F\fR.
.TP
.BR \-H ", " \-\-file-header " \fIHEADER\fR"
Custom file header template. Use \fB{}\fR as placeholder for filename.
Default: \fB```text {}\\n\fR (markdown code block)
.TP
.BR \-F ", " \-\-file-footer " \fIFOOTER\fR"
Custom file footer template. Use \fB{}\fR as placeholder for filename.
Default: \fB\\n```\\n\\n\fR

.SH EXAMPLES
.SS Basic Text Operations
Copy a single file to clipboard:
.RS
.nf
.B clip myfile.txt
.fi
.RE

Copy multiple files (concatenated):
.RS
.nf
.B clip file1.txt file2.txt file3.txt
.fi
.RE

Paste clipboard to stdout:
.RS
.nf
.B clip \-p
.fi
.RE

Paste clipboard to file:
.RS
.nf
.B clip \-p output.txt
.fi
.RE

.SS Image Operations
Paste PNG image from clipboard:
.RS
.nf
.B clip \-p screenshot.png
.fi
.RE

Paste with optimization (automatic tool selection):
.RS
.nf
.B clip \-p \-c optimized.png
.fi
.RE

Paste with specific quality:
.RS
.nf
.B clip \-p \-c \-Q 85 image.png
.fi
.RE

Resize to 75% of original dimensions:
.RS
.nf
.B clip \-p \-r \-Q 75 thumbnail.png
.fi
.RE

.SS Custom Formatting
Copy with markdown code block headers:
.RS
.nf
.B clip script.sh \-f \-H '```bash\\n' \-F '\\n```\\n'
.fi
.RE

Copy with XML format:
.RS
.nf
.B clip data.txt \-f \-H '<file name="{}">'\\
.B '<![CDATA[\\n' \-F ']]></file>\\n'
.fi
.RE

.SS Scripting Integration
Silent operation in scripts:
.RS
.nf
.B clip \-q important.txt
.fi
.RE

Process clipboard content via pipeline:
.RS
.nf
.B clip \-p | grep ERROR | wc \-l
.fi
.RE

.SH EXIT STATUS
.TP
.B 0
Success
.TP
.B 1
General error (file not found, clipboard operation failed, dependency missing, etc.)
.TP
.B 22
Invalid argument (bad option, quality out of range, invalid parameter value)

.SH FILES
.TP
.I /usr/local/bin/clip
System-wide installation of clip binary (default)
.TP
.I ~/.local/bin/clip
User-level installation of clip binary
.TP
.I /usr/local/share/bash-completion/completions/clip
System-wide bash completion script
.TP
.I ~/.local/share/bash-completion/completions/clip
User-level bash completion script

.SH ENVIRONMENT
.TP
.B DISPLAY
X11 display server connection. Required for clipboard operations via xclip.
Should be set to something like \fI:0\fR or \fI:1\fR.
.TP
.B WAYLAND_DISPLAY
Wayland display server connection. Works via XWayland compatibility.
Example: \fIwayland-0\fR

At least one of \fBDISPLAY\fR or \fBWAYLAND_DISPLAY\fR must be set for clipboard operations to work.

.SH DEPENDENCIES
.SS Required
.TP
.B xclip
X11 clipboard interface. Required for all clipboard operations.
Automatically offered for installation if missing.

.SS Optional (for PNG compression)
.TP
.B pngquant
High-quality lossy PNG compression with quality control.
Provides best compression results. Used first if available with \fB\-c\fR.
.TP
.B optipng
Lossless PNG optimizer. Used as fallback if pngquant not available.
.TP
.B imagemagick (convert)
Image processing toolkit. Required for \fB\-r\fR (resize) mode.
Used as final fallback for \fB\-c\fR (compression) mode.

All optional dependencies can be auto-installed when needed on Debian/Ubuntu systems.

.SH COMPRESSION BEHAVIOR
When using \fB\-c\fR or \fB\-r\fR with PNG images:
.IP \(bu 2
Original image is saved first
.IP \(bu 2
Compression is attempted using available tools
.IP \(bu 2
File sizes are compared
.IP \(bu 2
Only the compressed version is kept if it's actually smaller
.IP \(bu 2
Original is preserved if compression doesn't reduce size

This ensures you never accidentally increase file size through compression.

.SH NOTES
.IP \(bu 2
Text encoding is assumed to be UTF-8
.IP \(bu 2
Image support is limited to PNG format for paste operations with compression
.IP \(bu 2
Multiple files in copy mode are processed sequentially, not in parallel
.IP \(bu 2
The script uses modern Bash 5.2+ patterns and requires Bash 5.2 or later
.IP \(bu 2
For SSH sessions, use \fBssh -X\fR to enable X11 forwarding

.SH SECURITY
.B clip
has been professionally audited and maintains:
.IP \(bu 2
Zero security vulnerabilities
.IP \(bu 2
No command injection risks
.IP \(bu 2
Safe file operations with validation
.IP \(bu 2
Proper input sanitization
.IP \(bu 2
Protected variable expansions
.IP \(bu 2
Interactive confirmations for destructive operations

.SH STANDARDS
.B clip
is 100% compliant with the Bash Coding Standard (BCS) and passes ShellCheck with zero warnings.

Test coverage: 97.4% pass rate (76/78 tests)

.SH BUGS
Report bugs at:
.br
.I https://github.com/Open-Technology-Foundation/clip/issues

.SH SEE ALSO
.BR xclip (1),
.BR pngquant (1),
.BR optipng (1),
.BR convert (1)

Project homepage:
.br
.I https://github.com/Open-Technology-Foundation/clip

Bash Coding Standard:
.br
.I https://github.com/Open-Technology-Foundation/bash-coding-standard

.SH AUTHOR
Written by the Open Technology Foundation.

.SH COPYRIGHT
Copyright \(co 2025 Open Technology Foundation.
.br
License GPLv3+: GNU GPL version 3 or later
.br
.I https://gnu.org/licenses/gpl.html
.PP
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
